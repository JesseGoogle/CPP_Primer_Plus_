# Summary Of CPPInterview Questions

> 总结一些 C++ 的面试题，是最近大厂常问的：

## 1.左值引用与右值引用的区别何在？右值引用的意义是什么？

### 首先需要明确何为左值和右值

左值(lvalue)：
指表达式结束后依然存在的持久对象。左值代表的对象有确定的标识,可以通过其标识符来访问。最典型的左值是变量。

左值的特点：

1. 有确定的标识,可以取地址

2. 可以出现在赋值运算符的左侧

右值(rvalue):
指表达式结束时就不再存在的临时对象。右值代表的是值,而不是对象。最典型的右值是字面值和临时对象。

右值的特点：

1. 通常是临时对象,没有确定的标识

2. 不能取地址

3. 只能出现在赋值运算符的右侧

有了以上几点，再说明左/右值引用：

1. 左值引用：

> 是指绑定到左值的引用，通过 & 来获得左值引用，举例如下：

```C++

int a=10;              //非常量左值（有确定存储地址，也有变量名）
const int a1=10;       //常量左值（有确定存储地址，也有变量名）
const int a2=20;       //常量左值（有确定存储地址，也有变量名）
 
//非常量左值引用
int &b1=a;            //正确，a是一个非常量左值，可以被非常量左值引用绑定
int &b2=a1;           //错误,a1是一个常量左值，不可以被非常量左值引用绑定
int &b3=10;           //错误，10是一个非常量右值，不可以被非常量左值引用绑定
int &b4=a1+a2;        //错误,（a1+a2）是一个常量右值，不可以被非常量左值引用绑定

//常量左值引用
const int &c1=a;      //正确，a是一个非常量左值，可以被非常量右值引用绑定
const int &c2=a1;     //正确,a1是一个常量左值，可以被非常量右值引用绑定
const int &c3=a+a1;   //正确，（a+a1）是一个非常量右值，可以被常量右值引用绑定
const int &c4=a1+a2;  //正确,（a1+a2）是一个常量右值，可以被非常量右值引用绑定

```

> 因此可以归纳为：
> 非常量左值引用只能绑定到非常量左值上；常量左值引用可以绑定到非常量左值、常量左值、非常量右值、常量右值等所有的值类型。

2.右值引用：

> 指绑定到右值的引用，通过&&来获得右值引用，举例如下:

```C++

int a=10;             //非常量左值（有确定存储地址，也有变量名）
const int a1=20;      //常量左值（有确定存储地址，也有变量名）
const int a2=20;      //常量左值（有确定存储地址，也有变量名）

//非常量右值引用
int &&b1=a;            //错误，a是一个非常量左值，不可以被非常量右值引用绑定
int &&b2=a1;           //错误,a1是一个常量左值，不可以被非常量右值引用绑定
int &&b3=10;           //正确，10是一个非常量右值，可以被非常量右值引用绑定
int &&b4=a1+a2;        //错误,（a1+a2）是一个常量右值，不可以被非常量右值引用绑定

//常量右值引用
const int &&c1=a;      //错误，a是一个非常量左值，不可以被常量右值引用绑定
const int &&c2=a1;     //错误,a1是一个常量左值，不可以被常量右值引用绑定
const int &&c3=a+a1;   //正确，（a+a1）是一个非常量右值，可以被常量右值引用绑定
const int &&c4=a1+a2;  //正确,（a1+a2）是一个常量右值，不可以被常量右值引用绑定

```

> 因此可以归纳为：
> 非常量右值引用只能绑定到非常量右值上；常量右值引用可以绑定到非常量右值、常量右值上。

综上所述，左值引用与右值引用的区别就是：

1. 左值引用绑定到有确定存储空间以及变量名的对象上，表达式结束后对象依然存在；右值引用绑定到要求转换的表达式、字面常量、返回右值的表达式等临时对象上，赋值表达式结束后就对象就会被销毁。

2. 左值引用后可以利用别名修改左值对象；右值引用绑定的值不能修改。

右值引用的意义如下：

1. 实现移动语义,提高性能 右值引用可以绑定到右值和将要销毁的对象上,使这些临时对象的资源能被复用从而避免不必要的拷贝。

2. 防止悬垂引用 右值引用只能绑定到临时匿名对象上,生命周期由函数控制,避免了返回局部变量引用导致的悬垂引用问题。

3. 完美转发 通过模板参数传递左值或右值引用,可以实现完美转发,保持参数的左值或右值属性。

4. 区分重载函数 右值引用可以和左值引用区分两个版本的重载函数。
